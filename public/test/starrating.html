<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Autocomplete textbox using jQuery, PHP and MySQL by CodexWorld</title>
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
	<script src="//code.jquery.com/jquery-1.10.2.js"></script>
	<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<style type="text/css">
		.nopadding {
			padding: 0 !important;
			margin: 0 !important;
		}
		.noradius{
			border-radius: 0 !important;
		}
		.vertical-center {
		  min-height: 100%;  /* Fallback for browsers do NOT support vh unit */
		  min-height: 90vh; /* These two lines are counted as one :-)       */
		  display: flex;
		  align-items: center;
		  text-align: center;
		}
		.font-gold{
			color: #ffd119 !important;
		}
	</style>
</head>
<body>
	<div class="starRating vertical-center">
		<div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
			<div class= "col-xs-2 col-sm-2 col-md-2 col-lg-2 nopadding">
				<div class="btn btn-default btn-block btn-starRating noradius">
					<div>1</div>
					<span class="fa-star fa span-starRatting " data-rating="1" data-status="5"></span>
				</div>
			</div>
			<div class= "col-xs-2 col-sm-2 col-md-2 col-lg-2 nopadding">
				<div class="btn btn-default btn-block btn-starRating noradius">
					<div>2</div>
					<span class="fa-star fa span-starRatting " data-rating="2" data-status="5"></span>
				</div>
			</div>
			<div class= "col-xs-2 col-sm-2 col-md-2 col-lg-2 nopadding">
				<div class="btn btn-default btn-block btn-starRating noradius">
					<div>3</div>
					<span class="fa-star fa span-starRatting " data-rating="3" data-status="5"></span>
				</div>
			</div>
			<div class= "col-xs-2 col-sm-2 col-md-2 col-lg-2 nopadding">
				<div class="btn btn-default btn-block btn-starRating noradius">
					<div>4</div>
					<span class="fa-star fa span-starRatting " data-rating="4" data-status="5"></span>
				</div>
			</div>
			<div class= "col-xs-2 col-sm-2 col-md-2 col-lg-2 nopadding">
				<div class="btn btn-default btn-block btn-starRating noradius">
					<div>5</div>
					<span class="fa-star fa span-starRatting " data-rating="5" data-status="5"></span>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">

		$.fn.toggleAttr = function(attr, attr1, attr2) {
		  return this.each(function() {
		    var self = $(this);
		    if (self.attr(attr) == attr1)
		      self.attr(attr, attr2);
		    else
		      self.attr(attr, attr1);
		  });
		};

		$('.btn-starRating').click(function(e){
			// alert($('.font-gold').attr('data-rating'));
			var dataRating = $('.font-gold').attr('data-rating');
			var thisDataRating = $(this).find('.span-starRatting').attr('data-rating');
			var dataRating_length = $('.font-gold').length;
			console.log('dataRating = '+dataRating+' thisDataRating = '+thisDataRating+' dataRating_length = '+dataRating_length);
			if(dataRating_length == 1 && thisDataRating <= dataRating_length){
				$(this).find('.span-starRatting').toggleAttr('data-status', 'true', 'false');
				$(this).find('.span-starRatting').toggleClass('font-gold');
			}
			else if(dataRating != undefined){

				if(dataRating <= thisDataRating){
					for (var i = parseInt(dataRating)+1; i <= thisDataRating; i++) {
						$('[data-rating = "'+i+'" ]').attr('data-status', 'true');
						$('[data-rating = "'+i+'" ]').addClass('font-gold');
					}
					for (var removeI = parseInt(thisDataRating)+1; removeI <= 5; removeI++) {
						$('[data-rating = "'+removeI+'" ]').removeClass('font-gold');
						$('[data-rating = "'+removeI+'" ]').attr('data-status', 'false');
					}
				}
				else if(dataRating >= thisDataRating){
					for (var i = thisDataRating; i < dataRating; i++) {
						$('[data-rating = "'+i+'" ]').toggleAttr('data-status', 'true', 'false');
						$('[data-rating = "'+i+'" ]').toggleClass('font-gold');
					}
				}
			}
			else{
				$(this).find('.span-starRatting').toggleAttr('data-status', 'true', 'false');
				$(this).find('.span-starRatting').toggleClass('font-gold');
			}
		})
	</script>
</body>
</html>



